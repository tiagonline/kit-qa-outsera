# Kit QA Outsera - Automa√ß√£o Full Stack

> Projeto de automa√ß√£o de testes "End-to-End" simulando um ambiente real de produ√ß√£o. O projeto abrange testes de API, Interface Web (BDD), Mobile (Emula√ß√£o) e Performance (Carga).

[![CI Status](https://github.com/tiagonline/kit-qa-outsera/actions/workflows/workflow-pipeline.yml/badge.svg)](https://github.com/tiagonline/kit-qa-outsera/actions/workflows/workflow-pipeline.yml)
![Playwright](https://img.shields.io/badge/Playwright-1.40+-green?logo=playwright&logoColor=white)
![Cucumber](https://img.shields.io/badge/Cucumber-BDD-23d160?logo=cucumber&logoColor=white)
![K6](https://img.shields.io/badge/K6-Performance-purple?logo=k6&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-Ready-blue?logo=docker&logoColor=white)
![NodeJS](https://img.shields.io/badge/Node.js-18+-339933?logo=nodedotjs&logoColor=white)

---

## 1. Arquitetura e Estrutura

O projeto utiliza uma arquitetura modular baseada em **TypeScript**, focada em escalabilidade e facilidade de manuten√ß√£o.

### 1.1 Tecnologias e Vers√µes
* **Linguagem:** TypeScript / JavaScript (Node.js v18+)
* **E2E & Mobile:** [Playwright v1.40+](https://playwright.dev/)
* **BDD:** [CucumberJS v10+](https://github.com/cucumber/cucumber-js)
* **Performance:** [K6](https://k6.io/) com InfluxDB e Grafana via Docker.
* **CI/CD:** GitHub Actions.

### 1.2 Estrutura de Pastas
```text
kit-qa-outsera/
‚îú‚îÄ‚îÄ .github/workflows/   # Pipeline de CI/CD (GitHub Actions)
‚îú‚îÄ‚îÄ pages/               # Page Objects (Mapeamento de elementos e a√ß√µes)
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ api/             # Testes de Integra√ß√£o de API
‚îÇ   ‚îú‚îÄ‚îÄ e2e/             # Testes Web com Cucumber (Features & Steps)
‚îÇ   ‚îú‚îÄ‚îÄ mobile/          # Testes de Emula√ß√£o Mobile
‚îÇ   ‚îú‚îÄ‚îÄ k6-load/         # Testes de Carga e Performance (K6)
‚îÇ   ‚îî‚îÄ‚îÄ support/         # Hooks, Fixtures e Configura√ß√µes Globais
‚îî‚îÄ‚îÄ playwright.config.ts # Configura√ß√£o centralizada do Playwright
```

---

## 2. Instala√ß√£o e Depend√™ncias

Para executar este projeto localmente, necessitas de:

1. **Node.js** (v18 ou superior)  
2. **Docker** (para os testes de carga com monitoriza√ß√£o)

### 2.1 Instala√ß√£o

#### 2.1.1 Clonar o reposit√≥rio:
```bash
git clone https://github.com/tiagonline/kit-qa-outsera.git
cd kit-qa-outsera
```

#### 2.1.2 Instalar depend√™ncias:
```bash
npm install
npx playwright install --with-deps
```

---

## 3. Seguran√ßa e Vari√°veis de Ambiente

O projeto utiliza o ficheiro **.env** para gerir dados sens√≠veis e configura√ß√µes de ambiente, garantindo que informa√ß√µes como credenciais de acesso n√£o sejam versionadas.

### 3.1 Configura√ß√£o Local

1. Crie um ficheiro **.env** na raiz do projeto baseado no **.env.example**.  
2. Configure os seguintes par√¢metros:
   - `API_BASE_URL`: Define o endpoint da API (atualmente configurado para `https://jsonplaceholder.typicode.com`).  
   - `SAUCE_USERNAME`: Usu√°rio para os testes E2E (ex: `standard_user`).  
   - `SAUCE_PASSWORD`: Senha para os testes E2E (ex: `secret_sauce`).  

### 3.2 Seguran√ßa no CI/CD (GitHub Actions)

Por boas pr√°ticas de seguran√ßa, o ficheiro **.env** n√£o √© enviado para o reposit√≥rio (est√° no **.gitignore**).  
Nas execu√ß√µes do **GitHub Actions**, estas vari√°veis foram configuradas como **Secrets** do reposit√≥rio, permitindo que a pipeline rode de forma segura sem expor dados sens√≠veis em logs p√∫blicos.

---

## 4. Como Executar os Testes

| Cen√°rio              | Comando              |
|----------------------|----------------------|
| Executar Tudo (CI)   | `npm run test:all`   |
| Testes de API        | `npm run test:api`   |
| Testes Web (BDD)     | `npm run test:e2e`   |
| Testes Mobile        | `npm run test:mobile`|
| Teste de Performance | `npm run k6:run`     |

### 4.1 üõ†Ô∏è Como visualizar os relat√≥rios:
1. V√° at√© a aba **Actions** no GitHub.  
2. Selecione a √∫ltima execu√ß√£o bem-sucedida.  
3. No final da p√°gina, descarregue os **Artifacts**.  
4. Extraia os arquivos e abra o `index.html` (Playwright) ou `cucumber-report.html` (E2E) no seu navegador preferido.

---

## 5. Relat√≥rios e Evid√™ncias

### 5.1 Playwright Report

Ap√≥s os testes funcionais, o relat√≥rio HTML detalhado √© gerado automaticamente.  
Para visualizar:
```bash
npx playwright show-report
```

---

## 6. An√°lise de Performance (Tarefa 2 ‚Äì k6)

O teste de carga foi executado utilizando **k6** e conteineriza√ß√£o com **Docker**, simulando um cen√°rio de alta disponibilidade com **500 usu√°rios simult√¢neos (VUs)**.

### 6.1 Resumo da Execu√ß√£o

| M√©trica                 | Resultado Obtido | Status                       |
|--------------------------|------------------|------------------------------|
| Usu√°rios Simult√¢neos     | 500 VUs          | ‚úÖ Sucesso                   |
| Taxa de Sucesso (Checks) | 99.79%           | ‚úÖ Sucesso                   |
| Tempo de Resposta (P95)  | 990ms            | ‚úÖ Dentro do Limite (< 2s)   |
| Requisi√ß√µes Falhas       | 0.41%            | ‚úÖ Dentro do Limite (< 5%)   |
| Total de Requisi√ß√µes     | 207.186          | ‚ö° Alta Vaz√£o                |

### 6.2 Infraestrutura de Monitoramento

A solu√ß√£o foi implementada com uma stack de observabilidade completa:

- **k6:** Motor de execu√ß√£o dos testes.  
- **InfluxDB:** Armazenamento de m√©tricas em tempo real.  
- **Grafana:** Dashboard para visualiza√ß√£o de tend√™ncias e gargalos.  

### 6.3 Insights T√©cnicos e Identifica√ß√£o de Gargalos

1. **Conformidade de Thresholds:** Todos os crit√©rios de aceita√ß√£o (SLA) foram atingidos.  
   O tempo de resposta para 95% dos usu√°rios (P95) ficou em **990ms**, bem abaixo do limite cr√≠tico de **2000ms**.

2. **Estabilidade Sob Press√£o:** O sistema manteve uma vaz√£o m√©dia de **486 requisi√ß√µes por segundo (RPS)**, demonstrando resili√™ncia.

3. **Ponto de Aten√ß√£o:** Embora a taxa de erro seja baixa (**0.41%**), observou-se um aumento pontual na lat√™ncia m√°xima (**6.35s**).  
   Isso indica que, apesar da m√©dia ser excelente, em picos extremos acima de **450 VUs**, alguns usu√°rios podem experimentar lentid√£o moment√¢nea devido ao limite da API de Mock.

---

## 7. Produ√ß√£o e Boas Pr√°ticas

Este projeto foi desenvolvido seguindo padr√µes de mercado para **produ√ß√£o**:

- **Page Object Model (POM):** Separa√ß√£o clara entre l√≥gica de teste e seletores.  
- **Continuous Integration:** Pipeline automatizado que valida cada altera√ß√£o.  
- **Observabilidade:** Monitoriza√ß√£o de performance com dashboards profissionais com **Grafana**.  
- **Seguran√ßa:** Uso de **Secrets** para gest√£o de tokens e dados sens√≠veis.

---

**Autor:** Tiago Silva
